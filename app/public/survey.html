<!DOCTYPE html>
<html>
<head>
<!-- BootStrap -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<!-- Local css -->
<link rel="stylesheet" type="text/css" href="./css/style.css">
<!-- BootStrap js-->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
<!-- jquery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>
<meta charset="UTF-8">
<title>Survey for Friend Finder</title>
</head>

<body>
    <div class = "container">
        <h2 class = "p2Title">Survey Questions</h2>
            <div class="row">
                <div class="col 12 mt-2">
                    <h2 class="bm-3">About you</h2>
                    <h4 class="mt-2">Name (required)</h4>
                    <input type="text" id="userName" class="form-control" required="">
                    
                    <h4 class="mt-2">Link To Photo Image (Required)</h4>
                    <input type="text" id="userPhoto" class="form-control division" required="">
                <hr>
            <h4>Question 1</h4>
            <h5>Your mind is always buzzing with unexplored ideas and plans.</h5>
            <select class = "chosen-select" id="q1" placeholder = "Select option" >
                <option value>Select An Option</option>
                <option value="1">1 (strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly agree)</option>
            </select>

            <h5>You enjoy long walks</h5>
            <select class = "chosen-select" id="q2">
                <option value>Select An Option</option>
                <option value="1">1 (strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly agree)</option>
            </select>

            <h5>You always Feel unchallenged</h5>
            <select class = "chosen-select" id="q3">
                <option value>Select An Option</option>
                <option value="1">1 (strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly agree)</option>
            </select>

            <h5>You look for always look for deals</h5>
            <select class = "chosen-select" id="q4">
                <option value>Select An Option</option>
                <option value="1">1 (strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly agree)</option>
            </select>

            <h5>You rarely do something just out of sheer curiosity.</h5>
            <select class = "chosen-select" id="q5">
                <option value>Select An Option</option>
                <option value="1">1 (strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly agree)</option>
            </select>

            <h5>You find it easy to stay relaxed and focused even when there is some pressure.</h5>
            <select class = "chosen-select" id="q6">
                <option value>Select An Option</option>
                <option value="1">1 (strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly agree)</option>
            </select>

            <h5>You would do something just out of sheer curiosity.</h5>
            <select class = "chosen-select" id="q7">
                <option value>Select An Option</option>
                <option value="1">1 (strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly agree)</option>
            </select>

            <h5>In a discussion, truth should be more important than peopleâ€™s sensitivities.</h5>
            <select class = "chosen-select" id="q8">
                <option value>Select An Option</option>
                <option value="1">1 (strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly agree)</option>
            </select>

            <h5>Enjoy to fix things</h5>
            <select class = "chosen-select" id="q9">
                <option value>Select An Option</option>
                <option value="1">1 (strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly agree)</option>
            </select>

            <h5>Enjoy creating something</h5>
            <select class = "chosen-select" id="q10">
                <option value>Select An Option</option>
                <option value="1">1 (strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly agree)</option>
            </select>

            <div class="page-submit">
                <button type="submit" id ="submit" class="btn btn-primary btn-block">submit</button>
            </div>
            
        <div class="container">
            <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/william5656/friend-finder">GitHub Repo</a></p>
        </div>
            </div>
        </div>
    </div>
</body>

</html>

<div class="modal" id="result-modal">
        <div class="modal-dialog">
            <div class= "modal-content">
                    <h4 class="modal-title">Closet Friend Match</h4>
                <div class="modal-body">
                    <h5 id="friend-name"></h5>
                    <img id ="usermatch" src="">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div> 
        </div>
    </div>

<script type="text/javascript">
$( document ).ready(function() {


    $("#submit").on('click', function (event) {
        event.preventDefault();

        function checkform(){
            var vaild = true;
            $(".form-control ").each(function(){
                if ($(this).val() === ""){
                    vaild = false;
            
                }
            });
            $(".chosen-select").each(function(){

            if ($(this).val() === ""){
                vaild = false;
            }
            });
            return vaild;
        }

        if(checkform()){

            var userInput = {
                name : $("#userName").val().trim(),
                photo : $("#userPhoto").val().trim(),
                scores : [
                         $("#q1").val().trim(),
                         $("#q2").val().trim(),
                         $("#q3").val().trim(),
                         $("#q4").val().trim(),
                         $("#q5").val().trim(),
                         $("#q6").val().trim(),
                         $("#q7").val().trim(),
                         $("#q8").val().trim(),
                         $("#q9").val().trim(),
                         $("#q10").val().trim()
                ] 
            };
                        
                console.log(userInput);

                $.post("/api/friends", userInput, function(data){
                    console.log(data);
                    $("#friend-name").text(data.userName);
                    $("#usermatch").attr("src", data.userPhoto);

                    $("#result-modal").modal("toggle");
                });
            }else{
                alert("Please Fill out the Form!!")
            }
     });

});

</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>